# Cloudflare Worker 설정
# Admin 서비스: admin.frenv.pe.kr

name = "frenv-admin"
main = "src/index.ts"
compatibility_date = "2024-01-01"
compatibility_flags = ["nodejs_compat"]
account_id = "72f2828490134d9eda7d9ab2952b0cb0"

# D1 데이터베이스 바인딩 - Auth DB
[[d1_databases]]
binding = "AUTH_DB"
database_name = "trend-hunter-auth-db"
database_id = "8c03f04e-66bb-44ad-95ec-2f6cde8fe028"

# D1 데이터베이스 바인딩 - Pulse DB
[[d1_databases]]
binding = "PULSE_DB"
database_name = "trend-hunter-db"
database_id = "8f20ff06-9531-4530-939b-03c45bbeb7ea"

# D1 데이터베이스 바인딩 - i18n DB
[[d1_databases]]
binding = "I18N_DB"
database_name = "frenv-i18n-db"
database_id = "f8f7547c-fa3e-4362-8848-e5ffd7448d60"

# KV 바인딩 - Config
[[kv_namespaces]]
binding = "CONFIG_KV"
id = "2bb070b1b77048e3bffba033b8ad1c37"

# 환경 변수
[vars]
ENVIRONMENT = "development"
ADMIN_EMAIL = "timeundtime@gmail.com"

# 프로덕션 환경
[env.production]
vars = { ENVIRONMENT = "production", ADMIN_EMAIL = "timeundtime@gmail.com" }

# D1 바인딩 (프로덕션)
[[env.production.d1_databases]]
binding = "AUTH_DB"
database_name = "trend-hunter-auth-db"
database_id = "8c03f04e-66bb-44ad-95ec-2f6cde8fe028"

[[env.production.d1_databases]]
binding = "PULSE_DB"
database_name = "trend-hunter-db"
database_id = "8f20ff06-9531-4530-939b-03c45bbeb7ea"

[[env.production.d1_databases]]
binding = "I18N_DB"
database_name = "frenv-i18n-db"
database_id = "f8f7547c-fa3e-4362-8848-e5ffd7448d60"

# KV 바인딩 (프로덕션)
[[env.production.kv_namespaces]]
binding = "CONFIG_KV"
id = "2bb070b1b77048e3bffba033b8ad1c37"

# 커스텀 도메인 라우팅
[[env.production.routes]]
pattern = "admin.frenv.pe.kr"
custom_domain = true

# Secrets (wrangler secret put 으로 설정):
# - JWT_SECRET (Auth와 동일)
