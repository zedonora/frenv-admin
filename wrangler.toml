# Cloudflare Worker 설정
# Admin 서비스: admin.frenv.pe.kr

name = "frenv-admin"
main = "src/index.ts"
compatibility_date = "2024-01-01"
compatibility_flags = ["nodejs_compat"]
account_id = "72f2828490134d9eda7d9ab2952b0cb0"

# D1 데이터베이스 바인딩 - Auth DB
[[d1_databases]]
binding = "AUTH_DB"
database_name = "trend-hunter-auth-db"
database_id = "8c03f04e-66bb-44ad-95ec-2f6cde8fe028"

# D1 데이터베이스 바인딩 - Pulse DB
[[d1_databases]]
binding = "PULSE_DB"
database_name = "trend-hunter-db"
database_id = "b54e08e9-f54f-4558-898d-f0b676219a65"

# D1 데이터베이스 바인딩 - i18n DB
[[d1_databases]]
binding = "I18N_DB"
database_name = "frenv-i18n-db"
database_id = "5e4b45e7-9b2f-4d3c-8a1e-7f6c5d4b3a2e"

# KV 바인딩 - Config
[[kv_namespaces]]
binding = "CONFIG_KV"
id = "a1b2c3d4e5f6g7h8i9j0"

# 환경 변수
[vars]
ENVIRONMENT = "development"
ADMIN_EMAIL = "timeundtime@gmail.com"

# 프로덕션 환경
[env.production]
vars = { ENVIRONMENT = "production", ADMIN_EMAIL = "timeundtime@gmail.com" }

# D1 바인딩 (프로덕션)
[[env.production.d1_databases]]
binding = "AUTH_DB"
database_name = "trend-hunter-auth-db"
database_id = "8c03f04e-66bb-44ad-95ec-2f6cde8fe028"

[[env.production.d1_databases]]
binding = "PULSE_DB"
database_name = "trend-hunter-db"
database_id = "b54e08e9-f54f-4558-898d-f0b676219a65"

[[env.production.d1_databases]]
binding = "I18N_DB"
database_name = "frenv-i18n-db"
database_id = "5e4b45e7-9b2f-4d3c-8a1e-7f6c5d4b3a2e"

# KV 바인딩 (프로덕션)
[[env.production.kv_namespaces]]
binding = "CONFIG_KV"
id = "a1b2c3d4e5f6g7h8i9j0"

# 커스텀 도메인 라우팅
[[env.production.routes]]
pattern = "admin.frenv.pe.kr"
custom_domain = true

# Secrets (wrangler secret put 으로 설정):
# - JWT_SECRET (Auth와 동일)
